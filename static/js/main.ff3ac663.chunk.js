(this["webpackJsonpprojectmanager-spa3"]=this["webpackJsonpprojectmanager-spa3"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(34),o=n.n(c),l=n(19),u=n(2),i=(n(92),n(93),n(5)),s=n.n(i),d=n(7),m=n(11),f=n(85),p=n(29),h=n(12),E=n(86),v=function(e){var t=e.component,n=Object(E.a)(e,["component"]),a=Object(u.f)((function(e){return e})).isLoggedIn;return r.a.createElement(h.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},b=n(32),k=n(31).canonical,g=function(e){return r.a.createElement(b.a,null,e.title&&r.a.createElement("title",null,e.title),e.title&&r.a.createElement("meta",{name:"title",content:e.title}),e.title&&r.a.createElement("meta",{property:"og:title",content:e.title}),k&&r.a.createElement("link",{rel:"canonical",href:k}))},y=n(16),w=n(25),j=n(39),O=n(59),x=n(69),D=n(44),N=function(e){var t=Object(u.f)((function(e){return e})),n=t.dayStart,a=t.dayEnd,c=Object(u.e)((function(e){return e})),o=c.setDayStart,l=c.setDayEnd;return r.a.createElement(x.a,{className:""},r.a.createElement(w.a,{inline:!0,className:"d-inline-block",onSubmit:function(){var t=Object(d.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.callFunction(e.query);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(O.a,{size:"sm",className:""},r.a.createElement(j.a,{size:"sm",type:"date",className:"",value:n,onChange:function(e){return o(e.target.value)}}),r.a.createElement(j.a,{size:"sm",type:"date",className:"",value:a,onChange:function(e){return l(e.target.value)}}),r.a.createElement(O.a.Append,null,r.a.createElement(D.a,{size:"sm",type:"submit",variant:"outline-secondary",className:"dropdown-toggle"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-calendar mr-1"},r.a.createElement("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),r.a.createElement("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),r.a.createElement("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),r.a.createElement("line",{x1:"3",y1:"10",x2:"21",y2:"10"})),"Submit")))))},T=function(e){var t=e.callFunction,n=e.query,a=e.mainNav,c=e.secondNav;return r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 "},r.a.createElement(y.a,{variant:"tabs",defaultActiveKey:window.location.hash.includes(c)?"link-1":"home",className:"w-50"},r.a.createElement(y.a.Item,null,r.a.createElement(y.a.Link,{href:a,className:"nav-link",eventKey:"home"},e.children[0])),c&&r.a.createElement(y.a.Item,null,r.a.createElement(y.a.Link,{href:c,className:"nav-link",eventKey:"link-1"},e.children[1]))),n&&r.a.createElement(N,{callFunction:t,query:n}))},S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Just a Bunch of Tables | jBot"}),r.a.createElement(T,null,"homepage"))},I=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Profile | jBot"}),r.a.createElement(T,null,"Profile"))},C=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Projects | jBot"}),r.a.createElement(T,null,"Projects"))},A=n(20),L=n.n(A),_=n(73),B=n(23),M=n(24),F=n(48),P=n(10),H=n(13),Y=n(14);function z(){var e=Object(H.a)(["\n  cursor: pointer;\n  // float: right;\n\n  svg {\n    color: ",";\n  }\n"]);return z=function(){return e},e}var G=Y.a.div(z(),(function(e){return e.done?"green":"red"})),W=function(e){var t=e.done,n=e.taskId,a=e.taskTitle,c=Object(u.e)((function(e){return e})).editTask;return r.a.createElement(G,{title:"Mark task ".concat(a," as done"),done:t,onClick:function(){window.confirm('Mark task "'.concat(a,'" as ').concat(t?"not":""," done?"))&&c({taskId:n,payload:[{propName:"done",propValue:JSON.stringify(!t)},{propName:"column",propValue:t?"In Progress":"Completed"}]})}},t?r.a.createElement(P.c,null):r.a.createElement(P.h,null))};function J(){var e=Object(H.a)(["\n  cursor: pointer;\n\n  svg {\n    opacity: 0.5;\n    cursor: pointer;\n    color: green;\n  }\n"]);return J=function(){return e},e}var V=Y.a.div(J()),R=function(e){var t=e.setToggleNewNote;return r.a.createElement(V,{title:"Create a new note",onClick:function(){return t((function(e){return!e}))}},r.a.createElement(P.f,null))},q=n(9),U=n(47),$=n.n(U),K=n(77),X=n.n(K),Q=n(78),Z=n.n(Q),ee=n(79),te=n.n(ee),ne=n(80),ae=n.n(ne),re={placeholder:"Enter your note...",autofocus:!0,logLevel:"INFO",tools:{header:{class:X.a,inlineToolbar:["link"]},list:{class:Z.a,inlineToolbar:["link","bold"]},embed:{class:te.a,inlineToolbar:!1,config:{services:{youtube:!0,coub:!0}}},marker:{class:ae.a,shortcut:"CMD+SHIFT+M"}}},ce=r.a.memo((function(e){var t=e.taskId,n=e.setToggleNewNote,a=Object(u.e)((function(e){return e})).postNote,c=new $.a(Object(q.a)(Object(q.a)({},re),{},{holder:"note-editor-".concat(t)})),o=function(){var e=Object(d.a)(s.a.mark((function e(r){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,c.save();case 4:if(!(o=e.sent).blocks.length){e.next=9;break}return e.next=8,a({task:t,data:o});case 8:n((function(e){return!e}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn("Error occurred while creating a note: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",id:"note-editor-".concat(t)})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},r.a.createElement("button",{onClick:o},"Submit")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(!1)}},"Cancel"))))}));function oe(){var e=Object(H.a)(["\n  white-space: nowrap;\n  display: flex;\n\n  > span {\n    background: ",";\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    margin-right: 10px;\n  }\n"]);return oe=function(){return e},e}function le(){var e=Object(H.a)(["\n  white-space: nowrap;\n"]);return le=function(){return e},e}function ue(){var e=Object(H.a)(["\n  > td {\n    border-top: 0;\n  }\n\n  > td:nth-child(3) {\n    cursor: pointer;\n  }\n\n  > td:last-child {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  > td:last-child svg {\n    opacity: 0.5;\n    cursor: pointer;\n  }\n\n  span {\n    cursor: pointer;\n    font-weight: 600;\n  }\n"]);return ue=function(){return e},e}var ie=Y.a.tr(ue()),se=Y.a.td(le()),de=Y.a.td(oe(),(function(e){return e.hsl>=0?"hsl(".concat(e.hsl,", 100%, 50%, 0.5)"):"inherit"})),me=n(81),fe=n.n(me);function pe(){var e=Object(H.a)(["\n  cursor: pointer;\n\n  svg {\n    opacity: 0.5;\n  }\n"]);return pe=function(){return e},e}var he=Y.a.div(pe()),Ee=function(e){var t=e.setToggleEditNote;return r.a.createElement(he,{onClick:function(){return t((function(e){return!e}))},title:"Edit this note"},r.a.createElement(P.d,null))};function ve(){var e=Object(H.a)(["\n  cursor: pointer;\n  text-align: center;\n\n  svg {\n    opacity: 0.5;\n    color: red;\n  }\n"]);return ve=function(){return e},e}var be=Y.a.div(ve()),ke=function(e){var t=e.noteId,n=Object(u.e)((function(e){return e})).deleteNote;return r.a.createElement(be,{title:"Delete this note",onClick:function(){return window.confirm("Are you sure you want to delete this note?")&&n(t)}},r.a.createElement(P.a,null))},ge=function(e){var t,n=e.note,c=e.setToggleEditNote,o=Object(u.e)((function(e){return e})).editNote;Object(a.useEffect)((function(){t=new $.a(Object(q.a)(Object(q.a)({},re),{},{holder:"note-editor-".concat(n._id),data:n.data}))}),[]);var l=function(){var e=Object(d.a)(s.a.mark((function e(a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,t.save();case 4:if(r=e.sent,!(JSON.stringify(n.data.blocks)!==JSON.stringify(r.blocks))){e.next=10;break}return e.next=9,o({noteId:n._id,data:r});case 9:c(!1);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn("Error occurred while creating a note: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",id:"note-editor-".concat(n._id)})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},r.a.createElement("button",{onClick:l},"Submit")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(!1)}},"Cancel"))))},ye=function(e){return L()(e).fromNow()},we=function(e){return L()(e).format("dddd, MMMM Do, GGGG")},je=function(e){return L()(e).format("YYYY-MM-DD")},Oe=function(e){var t=Date.now()-42336e4,n=(e-t)*(240/(Date.now()+42336e4-t));return n<=0?0:n>=240?240:Math.round(n)},xe=function(e){var t=e.note,n=Object(a.useState)(!1),c=Object(m.a)(n,2),o=c[0],l=c[1],u=fe()();return o?r.a.createElement(ge,{note:t,setToggleEditNote:l}):r.a.createElement("tr",null,r.a.createElement("td",{dangerouslySetInnerHTML:{__html:u.parse(null===t||void 0===t?void 0:t.data).join("")},colSpan:"3",className:"text-muted"}),r.a.createElement("td",{className:"text-muted",title:we(t.createdAt)},ye(t.createdAt)),r.a.createElement("td",{className:"text-muted",title:we(t.updatedAt)},ye(t.updatedAt)),r.a.createElement("td",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(Ee,{setToggleEditNote:l}),r.a.createElement(ke,{noteId:t._id})))},De=function(e){var t=e.link;return r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",title:"Opent task link in new tab"},r.a.createElement(P.e,null))},Ne=function(e){var t=e.taskId,n=e.taskTitle,c=e.date,o=e.setNewDueDate,l=Object(a.useState)(je(c)),i=Object(m.a)(l,2),s=i[0],d=i[1],f=Object(u.e)((function(e){return e})).editTask;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"date",style:{border:"none",background:"transparent"},value:s,onChange:function(e){return d(e.target.value)}}),r.a.createElement(P.c,{onClick:function(){window.confirm('Set new due date for task "'.concat(n,'" to ').concat(we(s),"?"))&&f({taskId:t,payload:[{propName:"dueDate",propValue:"".concat(new Date(s).getTime())}]}),o()}}))},Te=r.a.memo((function(e){var t=e.task,n=r.a.useRef(0),c=Object(a.useState)(!1),o=Object(m.a)(c,2),l=o[0],u=o[1],i=Object(a.useState)(!1),s=Object(m.a)(i,2),d=s[0],f=s[1],p=Object(a.useState)(),h=Object(m.a)(p,2),E=h[0],v=h[1],b=t.notes[t.notes.length-1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null,r.a.createElement(se,null,r.a.createElement("span",{onClick:function(){return u(!l)}},t.title),", ",n.current++),r.a.createElement(se,null,t.pl),r.a.createElement(de,{title:we(t.dueDate),"data-date":t.dueDate,onDoubleClick:function(e){return v(e.target.dataset.date)},hsl:Oe(t.dueDate)},E?r.a.createElement(Ne,{taskId:t._id,taskTitle:t.title,date:parseInt(E),setNewDueDate:v}):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null),ye(t.dueDate))),r.a.createElement(se,{title:we(t.createdAt)},ye(t.createdAt)),r.a.createElement(se,{title:we(t.updatedAt)},ye(t.updatedAt)),r.a.createElement(se,null,t.kanboard&&r.a.createElement(De,{link:t.kanboard}),r.a.createElement(W,{done:t.done,taskId:t._id,taskTitle:t.title}),r.a.createElement(R,{setToggleNewNote:f}))),!l&&b&&r.a.createElement(xe,{note:b}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6",className:"text-muted"},t.description)),t.notes.map((function(e){return r.a.createElement(xe,{key:e._id,note:e})}))),d&&r.a.createElement(ce,{taskId:t._id,setToggleNewNote:f}))})),Se=function(){var e=Object(u.f)((function(e){return e})),t=e.taskDocs,n=e.filteredTaskDocs,c=e.taskDocsSkip,o=e.hasMoreTaskDocs,l=Object(u.e)((function(e){return e})),i=l.getTaskDocs,f=l.resetTaskDocs,h=Object(a.useRef)(new URLSearchParams);h.current.set("skip",c);var E=Object(a.useRef)({title:-1,pl:-1,createdAt:1,updatedAt:1,dueDate:1});/\?/.test(window.location.hash)&&window.location.hash.split("?")[1].split("&").forEach((function(e){var t=e.split("="),n=Object(m.a)(t,2),a=n[0],r=n[1];h.current.set(a,decodeURIComponent(r))})),Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!t.length,!e.t0){e.next=4;break}return e.next=4,i(h.current);case 4:case"end":return e.stop()}}),e)})))()}),[]);var v=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(h.current);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="title"===e.t0?3:"pl"===e.t0?14:"createdAt"===e.t0?25:"updatedAt"===e.t0?36:"dueDate"===e.t0?47:58;break;case 3:return f(),E.current.title=-1*E.current.title,h.current.delete("pl"),h.current.delete("createdAt"),h.current.delete("updatedAt"),h.current.delete("dueDate"),h.current.set("skip",0),h.current.set("sort","title:"+E.current.title),e.next=13,v();case 13:return e.abrupt("break",59);case 14:return f(),E.current.pl=-1*E.current.pl,h.current.delete("title"),h.current.delete("createdAt"),h.current.delete("updatedAt"),h.current.delete("dueDate"),h.current.set("skip",0),h.current.set("sort","pl:"+E.current.pl),e.next=24,v();case 24:return e.abrupt("break",59);case 25:return f(),E.current.createdAt=-1*E.current.createdAt,h.current.delete("title"),h.current.delete("pl"),h.current.delete("updatedAt"),h.current.delete("dueDate"),h.current.set("skip",0),h.current.set("sort","createdAt:"+E.current.createdAt),e.next=35,v();case 35:return e.abrupt("break",59);case 36:return f(),E.current.updatedAt=-1*E.current.updatedAt,h.current.delete("title"),h.current.delete("pl"),h.current.delete("createdAt"),h.current.delete("dueDate"),h.current.set("skip",0),h.current.set("sort","updatedAt:"+E.current.updatedAt),e.next=46,v();case 46:return e.abrupt("break",59);case 47:return f(),E.current.dueDate=-1*E.current.dueDate,h.current.delete("title"),h.current.delete("pl"),h.current.delete("createdAt"),h.current.delete("updatedAt"),h.current.set("skip",0),h.current.set("sort","dueDate:"+E.current.dueDate),e.next=57,v();case 57:case 58:return e.abrupt("break",59);case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=t.length,y=n.length?n:t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Tasks (".concat(k,") | jBot")}),r.a.createElement(T,{callFunction:!0,query:!0,mainNav:"#/tasks",secondNav:"#/tasks/booking"},"All tasks","Booking"),r.a.createElement(_.a,{dataLength:t.length,next:v,hasMore:o,loader:r.a.createElement("h4",null,"Loading...")},r.a.createElement(p.a,null,r.a.createElement(M.a,null,r.a.createElement(B.a,{className:"mb-3"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,L()().format("dddd, MMMM Do YYYY")),r.a.createElement(F.a,{striped:!0,hover:!0,responsive:!0,size:"sm",className:"mb-0"},r.a.createElement("colgroup",null,r.a.createElement("col",{style:{width:"20%"}}),r.a.createElement("col",{style:{width:"20%"}}),r.a.createElement("col",{style:{width:"20%"}}),r.a.createElement("col",{style:{width:"20%"}}),r.a.createElement("col",{style:{width:"20%"}})),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return b("title")}},r.a.createElement(P.g,null)," Task")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return b("pl")}},r.a.createElement(P.g,null)," Project Lead")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return b("dueDate")}},r.a.createElement(P.g,null)," Due")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return b("createdAt")}},r.a.createElement(P.g,null)," Created")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return b("updatedAt")}},r.a.createElement(P.g,null)," Updated")),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,y.map((function(e,t){return r.a.createElement(Te,{key:t,task:e})}))))))))))},Ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Clock | jBot"}),r.a.createElement(T,null,"Clock"))},Ce=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Calendar | jBot"}),r.a.createElement(T,null,"Calendar"))},Ae=n(82),Le=n.n(Ae),_e=function(e){var t=e.seriesData,n=e.type,c=0,o="";"worked"===n&&(c=Math.round(t/10*100),o="#008FFB"),"booked"!==n&&"external"!==n||(c=Math.round(t/7.5*100),o="#00f970"),"external"===n&&(o="#fcc202"),"overtime"===n&&(c=Math.round(t/2*100),o="#f90010");var l=Object(a.useState)([c]),u=Object(a.useState)({chart:{type:"radialBar"},colors:[o],plotOptions:{radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:-30,offsetY:-15,hollow:{margin:1,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#ededed",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,opacity:.5}},dataLabels:{show:!0,name:{show:!1,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10},value:{show:!0,fontSize:"9px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:5,formatter:function(e){return e+" %"}}}}}});return r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement("div",{id:"chart"},r.a.createElement(Le.a,{options:u[0],series:l[0],type:"radialBar",width:"120px",height:"120px"})))},Be=function(e){return r.a.createElement(M.a,{xl:3,md:6},r.a.createElement(B.a,{className:"mb-3"},r.a.createElement(B.a.Body,null,r.a.createElement("div",{className:"float-left",dir:"ltr"},r.a.createElement(_e,{seriesData:e.totalHours,type:e.type})),r.a.createElement("div",{className:"text-right"},r.a.createElement("h3",{className:"mb-1"},e.totalHours,r.a.createElement("small",{className:"text-muted"},"h")),r.a.createElement("p",{className:"text-muted mb-1"},e.children)))))};function Me(){var e=Object(H.a)(["\n  white-space: nowrap;\n  display: flex;\n  justify-content: space-between;\n\n  svg {\n    cursor: pointer;\n  }\n"]);return Me=function(){return e},e}function Fe(){var e=Object(H.a)(["\n  > td {\n    border-top: 0;\n    vertical-align: middle;\n  }\n\n  span {\n    margin-top: 5px;\n  }\n\n  svg {\n    opacity: 0.5;\n    color: #007bff;\n  }\n"]);return Fe=function(){return e},e}var Pe=Y.a.tr(Fe()),He=Y.a.td(Me());function Ye(){var e=Object(H.a)(["\n  display: flex;\n  align-items: center;\n  margin: 5px 0 0 5px;\n\n  svg {\n    color: ",";\n  }\n"]);return Ye=function(){return e},e}var ze=Y.a.div(Ye(),(function(e){return e.booked?"green":"red"})),Ge=function(e){var t=e.booked;return r.a.createElement(ze,{booked:t},t?r.a.createElement(P.c,null):r.a.createElement(P.h,null))},We=function(e){var t=e.date,n=e.eventId,c=e.amount,o=e.disabled,l=Object(a.useState)(c),i=Object(m.a)(l,2),f=i[0],p=i[1],h=Object(a.useState)(t),E=Object(m.a)(h,2),v=E[0],b=E[1],k=Object(u.e)((function(e){return e})).bookEvent,g=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",alert("Please select an amount!"));case 2:if(v){e.next=4;break}return e.abrupt("return",alert("Please select a date!"));case 4:if(e.t0=window.confirm("Do you want to book ".concat(f,"h to ").concat(v,"?")),!e.t0){e.next=8;break}return e.next=8,k({eventId:n,day:v,amount:f});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{width:"300px"}},r.a.createElement(O.a,{size:"sm",className:""},r.a.createElement(w.a.Control,{placeholder:"Amount",type:"number",step:.25,min:.25,max:7.5,value:f,onChange:function(e){return p(e.target.value)},disabled:o}),r.a.createElement(w.a.Control,{placeholder:"Amount",type:"date",style:{width:"100px"},value:v,onChange:function(e){return b(e.target.value)},disabled:o}),r.a.createElement(D.a,{size:"sm",variant:"outline-secondary",onClick:g,disabled:o},"Book")))},Je=function(e){var t=e.bookingId,n=Object(u.e)((function(e){return e})).deleteBooking;return r.a.createElement(P.i,{onClick:function(){return function(e){window.confirm("Do you want to delete this booking?")&&n({bookingId:e})}(t)},style:{opacity:"50%",marginLeft:"5px",cursor:"pointer"}})},Ve=function(e){return L()(e).format("DD.MM.YY")},Re=function(e){var t,n=e.event,c=e.day,o=Object(a.useState)(!1),u=Object(m.a)(o,2),i=u[0],s=u[1],d=Math.max(n.logs.length,n.bookingDetails?n.bookingDetails.length:0),f=Ve(c)===Ve(n.date),p=null===(t=n.bookingDetails)||void 0===t?void 0:t.filter((function(e){return e.toDate===c})).reduce((function(e,t){return e+t.amount}),0),h=p||(n.booked?n.duration:0);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null,r.a.createElement(He,null,r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return s(!i)}},n.title),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(We,{date:c,eventId:n.eventId,amount:n.duration,disabled:!f}))),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("span",null,n.duration,r.a.createElement("small",{className:"text-muted"}," h"))),r.a.createElement("td",{style:{display:"flex",justifyContent:"center",flexGrow:1}},r.a.createElement("span",null,h||0,r.a.createElement("small",{className:"text-muted"}," h")),r.a.createElement(Ge,{booked:n.booked})),r.a.createElement("td",{style:{textAlign:"center"}},!f&&Ve(n.date)),r.a.createElement(He,null,r.a.createElement(l.b,{to:"/stats/".concat(n.taskId)},n.task),n.kanboard&&r.a.createElement(P.b,{onClick:function(){return window.open("".concat(n.kanboard,"#d=").concat(L()(c).format("DD-MM"),"&t=").concat(n.duration),"","resizable=yes,scrollbars=yes,width=1280,height=1024")}}))),i&&Array.from({length:d},(function(e,t){var a,o,l,u,i,s,d,m=Ve(c),p=Ve(null===(a=n.bookingDetails)||void 0===a||null===(o=a[t])||void 0===o?void 0:o.toDate);return r.a.createElement("tr",{key:t},n.logs[t]?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{className:"text-muted"},"- ",null===(l=n.logs[t])||void 0===l?void 0:l.title),r.a.createElement("td",{style:{textAlign:"center"}},null===(u=n.logs[t])||void 0===u?void 0:u.duration,r.a.createElement("small",{className:"text-muted"}," h"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null),r.a.createElement("td",null)),(null===(i=n.bookingDetails)||void 0===i?void 0:i[t])?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("small",{className:"text-muted"},"".concat(m===p?"":"booked to "+p))," ",n.bookingDetails[t].amount,r.a.createElement("small",{className:"text-muted"}," h"),f&&r.a.createElement(Je,{bookingId:null===(s=n.bookingDetails)||void 0===s||null===(d=s[t])||void 0===d?void 0:d._id})),r.a.createElement("td",null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("td",null))})))},qe=function(e){var t=e.stat;return r.a.createElement(p.a,null,r.a.createElement(M.a,null,r.a.createElement(B.a,{className:"mb-3"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,L()(t.date).format("dddd, MMMM Do YYYY")),r.a.createElement(F.a,{striped:!0,hover:!0,responsive:!0,size:"sm",className:"mb-0"},r.a.createElement("colgroup",null,r.a.createElement("col",{style:{width:"50%"}}),r.a.createElement("col",{style:{width:"5%"}}),r.a.createElement("col",{style:{width:"15%"}}),r.a.createElement("col",{style:{width:"7%"}}),r.a.createElement("col",{style:{width:"23%"}})),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Event"),r.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Worked"),r.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Booked"),r.a.createElement("th",{scope:"col",style:{textAlign:"center"}},"Worked on"),r.a.createElement("th",{scope:"col"},"Task"))),r.a.createElement("tbody",null,t.events.sort((function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()})).map((function(e,n){return r.a.createElement(Re,{key:n,event:e,day:t.day})}))))))))},Ue=function(e){return e.dayStats.map((function(e,t){var n=e.events.map((function(t){var n;return null===(n=t.bookingDetails)||void 0===n?void 0:n.reduce((function(t,n){return Ve(e.day)!==Ve(n.toDate)?t+n.amount:t}),0)})).reduce((function(e,t){return t?e+t:e}),0),c=e.events.map((function(t){var n;return t.bookingDetails?null===(n=t.bookingDetails)||void 0===n?void 0:n.reduce((function(t,n){return Ve(e.day)===Ve(n.toDate)?t+n.amount:t}),0):t.booked?t.duration:0})).reduce((function(e,t){return t?e+t:e}),0),o=e.events.reduce((function(t,n){return je(n.date)===je(e.date)?t+n.duration:t}),0);return r.a.createElement(a.Fragment,{key:e.date},r.a.createElement(p.a,null,r.a.createElement(Be,{totalHours:o,type:"worked"},"Hours worked"),r.a.createElement(Be,{totalHours:c,type:"booked"},"Hours booked"),r.a.createElement(Be,{totalHours:n,type:"external"},"External bookings"),r.a.createElement(Be,{totalHours:e.totalHoursOvertime,type:"overtime"},"Overtime")),r.a.createElement(qe,{stat:e}))}))},$e=function(){var e=Object(u.f)((function(e){return e})),t=e.dayStart,n=e.dayEnd,c=e.dayStats,o=e.statsFetched,l=Object(u.e)((function(e){return e})).getDayStats,i=new URLSearchParams("start=".concat(t,"&end=").concat(n));return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!o,!e.t0){e.next=4;break}return e.next=4,l(i);case 4:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Day stats (".concat(c.length,") | jBot")}),r.a.createElement(T,{callFunction:l,query:i,mainNav:"#/stats",secondNav:"#/stats/total"},"Stats","Total"),r.a.createElement(Ue,{dayStats:c}))},Ke=function(e){var t=e.stat;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Start: ",t.range.startDate),r.a.createElement("div",null,"End: ",t.range.endDate),r.a.createElement("div",null,"Total days: ",t.totalDays),r.a.createElement("div",null,"Total events: ",t.totalEvents),r.a.createElement("div",null,"Total logs: ",t.totalLogs),r.a.createElement("div",null,"Total hours worked: ",t.totalHoursWorked),r.a.createElement("div",null,"Total hours booked: ",t.totalHoursBooked),r.a.createElement("div",null,"Total hours pending: ",t.totalHoursPendingBooking),r.a.createElement("div",null,"Total hours overtime: ",t.totalHoursOvertime))},Xe=function(){var e=Object(u.f)((function(e){return e})),t=e.dayStart,n=e.dayEnd,c=e.dayStatsTotal,o=Object(u.e)((function(e){return e})).getDayStatsTotal,l=new URLSearchParams("start=".concat(t,"&end=").concat(n,"&total=",!0));return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(l);case 2:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{callFunction:o,query:l,mainNav:"#/stats",secondNav:"#/stats/total"},"Stats","Total"),c.map((function(e,t){return r.a.createElement(Ke,{key:t,stat:e})})))},Qe=function(e){var t=e.stat;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Start: ",t.range.startDate),r.a.createElement("div",null,"End: ",t.range.endDate),r.a.createElement("div",null,"Task: ",t.task),r.a.createElement("div",null,"Description: ",t.description),r.a.createElement("div",null,"Kanboard: ",t.kanboard),r.a.createElement("div",null,"Total events: ",t.totalEvents),r.a.createElement("div",null,"Total hours worked: ",t.totalHoursWorked),r.a.createElement("div",null,"Total hours booked: ",t.totalHoursBooked),r.a.createElement("div",null,"Total hours pending: ",t.totalHoursPendingBooking))},Ze=function(e){var t=Object(u.f)((function(e){return e})),n=t.dayStart,c=t.dayEnd,o=t.taskStats,l=Object(u.e)((function(e){return e})),i=l.setTaskStats,m=l.getTaskStats,f=new URLSearchParams("start=".concat(n,"&end=").concat(c,"&id=").concat(e.match.params.projectId));return Object(a.useEffect)((function(){return Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(f);case 2:case"end":return e.stop()}}),e)})))(),function(){return i([])}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"".concat(o[0]?o[0].task:"Task stats"," | jBot")}),r.a.createElement(T,{callFunction:m,query:f},"Task stats: ",o[0]&&o[0].task),o.map((function(e){return r.a.createElement(Qe,{key:e.task,stat:e})})))};function et(){var e=Object(H.a)(["\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545;\n"]);return et=function(){return e},e}function tt(){var e=Object(H.a)(["\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return tt=function(){return e},e}function nt(){var e=Object(H.a)(["\n  top: 0px;\n  bottom: 0px;\n  height: 100vh;\n  min-width: 250px;\n"]);return nt=function(){return e},e}var at=Y.a.div(nt()),rt=Y.a.div(tt()),ct=Y.a.div(et()),ot=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!0),i=Object(m.a)(l,2),f=i[0],p=i[1],h=Object(a.useState)(""),E=Object(m.a)(h,2),v=E[0],b=E[1],k=Object(a.useState)(!0),y=Object(m.a)(k,2),j=y[0],O=y[1],x=Object(a.useState)(!1),N=Object(m.a)(x,2),T=N[0],S=N[1],I=Object(u.f)((function(e){return e})),C=I.isBackendAlive,A=I.isLoggedIn,L=Object(u.e)((function(e){return e})).logIn,_=function(){e.location.state?e.history.push(e.location.state.from.pathname):e.history.push("/")},B=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),S(!1),!f||!j){e.next=7;break}return e.next=5,L({email:c,password:v});case 5:e.sent?(S(!1),_()):(p(!0),O(!0),S(!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){A&&_()}),[]),A?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Login | jBot"}),r.a.createElement(M.a,{md:{span:3,offset:6}},r.a.createElement(at,null,r.a.createElement(rt,null,r.a.createElement(w.a,{onSubmit:B},r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{required:!0,size:"sm",type:"email",placeholder:"Email",value:c,onChange:function(e){return o(e.target.value)},onBlur:function(e){return c.length<6?p(!1):p(!0)}}),!f&&r.a.createElement(ct,null,"Email needs to have at least 6 characters.")),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{required:!0,size:"sm",type:"password",placeholder:"Password",value:v,onChange:function(e){return b(e.target.value)},onBlur:function(e){return v.length<6?O(!1):O(!0)}}),!j&&r.a.createElement(ct,null,"Password needs to have at least 6 characters."),T&&r.a.createElement(ct,null,"Invalid credentials. Please try again.")),r.a.createElement(D.a,{disabled:!C||!j||!f,variant:"primary",type:"submit",size:"sm"},"Submit"),!C&&r.a.createElement(ct,null,"Service is currently down. Please try again later."))))))},lt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{title:"Borked! | jBot"}),r.a.createElement(T,null,"borked"),r.a.createElement(l.b,{to:"/"},"Ho Gome"))},ut=function(){return r.a.createElement(h.d,null,r.a.createElement(v,{exact:!0,path:"/",component:S}),r.a.createElement(v,{exact:!0,path:"/profile",component:I}),r.a.createElement(v,{exact:!0,path:"/projects",component:C}),r.a.createElement(v,{exact:!0,path:"/tasks",component:Se}),r.a.createElement(v,{exact:!0,path:"/clock",component:Ie}),r.a.createElement(v,{exact:!0,path:"/calendar",component:Ce}),r.a.createElement(v,{exact:!0,path:"/stats",component:$e}),r.a.createElement(v,{exact:!0,path:"/stats/total",component:Xe}),r.a.createElement(v,{exact:!0,path:"/stats/:projectId",component:Ze}),r.a.createElement(h.b,{exact:!0,path:"/login",component:ot}),r.a.createElement(h.b,{path:"*",component:lt}))},it=n(31),st=function(){return r.a.createElement(b.a,null,r.a.createElement("script",null,"var AGAdataLayer = ".concat(JSON.stringify(it.AGAdataLayer))))},dt=it.GlobalContainer,mt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null,r.a.createElement("script",null,"(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','".concat(dt,"');"))))},ft=n(35),pt=function(){var e=Object(u.e)((function(e){return e})).filterTaskDocs;return r.a.createElement("input",{className:"form-control form-control-dark w-100",type:"text",placeholder:"Filter","aria-label":"Filter",onChange:function(t){return/tasks/.test(window.location.hash)&&/^[a-zA-Z0-9]*$/gi.test(t.target.value)&&e(t.target.value)}})},ht=(n(110),function(){var e=Object(u.f)((function(e){return e})).isLoggedIn,t=Object(u.e)((function(e){return e})).logOut;return e&&r.a.createElement(ft.a,{bg:"dark",variant:"dark",collapseOnSelect:!0,expand:"md",className:"sticky-top flex-md-nowrap p-0 shadow"},r.a.createElement(ft.a.Brand,{className:"col-md-3 col-lg-2 mr-0 px-3"},"jBot"),r.a.createElement(ft.a.Toggle,{className:"position-absolute","aria-controls":"sidebarMenu",onClick:function(){document.getElementById("sidebarMenu").classList.toggle("show")}}),r.a.createElement(pt,null),r.a.createElement(y.a,{as:"ul",className:"px-3"},r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(y.a.Link,{className:"event_menu_click","data-action-detail":"main_nav_logout",onClick:function(){return t()}},"Logout"))))}),Et=(n(111),function(){var e=function(e){var t=document.querySelector(".active");t&&t.classList.remove("active"),e.target.classList.add("active"),document.getElementById("sidebarMenu").classList.remove("show")};return Object(u.f)((function(e){return e})).isLoggedIn&&r.a.createElement(ft.a,{id:"sidebarMenu",expand:!1,className:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"},r.a.createElement("div",{className:"sidebar-sticky pt-3"},r.a.createElement(y.a,{as:"ul",navbar:!1,className:"flex-column"},r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_home",to:"/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-home"},r.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"})),"Home")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_profile",to:"/profile"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-users"},r.a.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),r.a.createElement("circle",{cx:"9",cy:"7",r:"4"}),r.a.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),r.a.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})),"Profile")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_projects",to:"/projects"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-layers"},r.a.createElement("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),r.a.createElement("polyline",{points:"2 17 12 22 22 17"}),r.a.createElement("polyline",{points:"2 12 12 17 22 12"})),"Projects")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_tasks",to:"/tasks?done=false&column=In Progress"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file"},r.a.createElement("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),r.a.createElement("polyline",{points:"13 2 13 9 20 9"})),"Tasks")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_clock",to:"/clock"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-home"},r.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"})),"Clock")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_calendar",to:"/calendar"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-home"},r.a.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),r.a.createElement("polyline",{points:"9 22 9 12 15 12 15 22"})),"Calendar")),r.a.createElement(y.a.Item,{as:"li"},r.a.createElement(l.b,{onClick:e,className:"nav-link event_menu_click","data-action-detail":"side_nav_stats",to:"/stats"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-bar-chart-2"},r.a.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),r.a.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),r.a.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"})),"Stats")))))}),vt=function(e){return console.log("I'm being rendered! Layout"),r.a.createElement(r.a.Fragment,null,r.a.createElement(st,null),r.a.createElement(mt,null),r.a.createElement(ht,null),r.a.createElement(f.a,{fluid:!0},r.a.createElement(p.a,null,r.a.createElement(Et,null),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-md-4"},r.a.createElement(ut,null)))))},bt=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(u.e)((function(e){return e})).checkAuth;return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:c(!0);case 3:case"end":return e.stop()}}),e)})))()}),[]),n?r.a.createElement(vt,null):null},kt=n(31)["pmspa-api"],gt=kt.api,yt=kt.apiVersion,wt=function(e){return function(){var t=Object(d.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(a);case 3:if((r=t.sent).status>=500&&n.setIsBackendAlive(!1),r.error){t.next=10;break}return n.setIsLoggedIn(!0),t.abrupt("return",!0);case 10:return n.setIsLoggedIn(!1),t.abrupt("return",!1);case 12:t.next=20;break;case 14:return t.prev=14,t.t0=t.catch(0),console.warn(t.t0),n.setIsLoggedIn(!1),n.setIsBackendAlive(!1),t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()},jt=wt((function(e){return new Promise((function(t,n){fetch("".concat(gt,"/").concat(yt,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return document.cookie="booking="+e.headers.get("X-Auth"),e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))})),Ot=wt((function(){var e;return new Promise((function(t,n){fetch("".concat(gt,"/").concat(yt,"/auth"),{method:"POST",credentials:"include"}).then((function(t){return e=t.status,t.json()})).then((function(n){return t(Object(q.a)({status:e},n))})).catch((function(e){return n(e)}))}))})),xt=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){fetch("".concat(gt,"/").concat(yt,"/auth/logout"),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}));case 3:if(e.sent.error){e.next=9;break}return t.setIsLoggedIn(!1),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.warn(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Dt={isBackendAlive:!0,setIsBackendAlive:Object(u.b)((function(e,t){return function(e,t){e.isBackendAlive=t}(e,t)}))},Nt={isLoggedIn:!1,logIn:Object(u.d)((function(e,t){return jt(e,t)})),logOut:Object(u.d)((function(e){return xt(e)})),checkAuth:Object(u.d)((function(e,t){return Ot(e,t)})),setIsLoggedIn:Object(u.b)((function(e,t){return function(e,t){e.isLoggedIn=t}(e,t)}))},Tt=n(31)["pmspa-api"],St=Tt.api,It=Tt.apiVersion,Ct=Tt.api_booking_machine,At=function(e,t){return new Promise((function(n,a){fetch("".concat(St,"/").concat(It,"/days/event.update/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))},Lt=function(e,t,n){return new Promise((function(a,r){var c;fetch("".concat(Ct,"/book?eventId=").concat(e,"&day=").concat(t,"&amount=").concat(n),{method:"POST",headers:{Authorization:document.cookie.split("; ").find((function(e){return e.includes("Bearer")})).split("=")[1]}}).then((function(e){return c=e.status,e.json()})).then((function(e){return a(Object(q.a)({status:c},e))})).catch((function(e){return r(e)}))}))},_t=function(e){return new Promise((function(t,n){var a;fetch("".concat(Ct,"/delete?bookingId=").concat(e),{method:"DELETE",headers:{Authorization:document.cookie.split("; ").find((function(e){return e.includes("Bearer")})).split("=")[1]}}).then((function(e){return a=e.status,e.json()})).then((function(e){return t(Object(q.a)({status:a},e))})).catch((function(e){return n(e)}))}))},Bt=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.eventId,r=n.payload,e.prev=1,e.next=4,At(a,r);case 4:e.sent.error||t.updateEvent({eventId:a,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Mt=function(e){return Object(q.a)(Object(q.a)({},e),{},{eventId:e._id.$oid,day:e.day.$oid,bookingDetails:e.bookingDetails.map((function(e){return Object(q.a)(Object(q.a)({},e),{},{_id:e._id.$oid})})),updatedAt:new Date(+e.updatedAt.$date.$numberLong).toISOString()})},Ft=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a,r,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.eventId,r=n.day,c=n.amount,e.prev=1,e.next=4,Lt(a,r,c);case 4:(o=e.sent).error?alert(o.error):(l=Mt(o.event),t.updateEvent1(l)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.bookingId,e.prev=1,e.next=4,_t(a);case 4:(r=e.sent).error?alert(r.error):(c=Mt(r.event),t.updateEvent1(c)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Ht={dayStart:L()().startOf("week").format("YYYY-MM-DD"),dayEnd:L()().format("YYYY-MM-DD"),editEvent:Object(u.d)((function(e,t){return Bt(e,t)})),bookEvent:Object(u.d)((function(e,t){return Ft(e,t)})),deleteBooking:Object(u.d)((function(e,t){return Pt(e,t)})),setDayStart:Object(u.b)((function(e,t){return function(e,t){e.dayStart=t}(e,t)})),setDayEnd:Object(u.b)((function(e,t){return function(e,t){e.dayEnd=t}(e,t)})),updateEvent1:Object(u.b)((function(e,t){return function(e,t){e.dayStats.map((function(e){return e.events=e.events.map((function(e){return e.eventId===t.eventId?t:e})),e}))}(e,t)}))},Yt=n(60),zt=n(31)["pmspa-api"],Gt=zt.api,Wt=zt.apiVersion,Jt=function(e){return new Promise((function(t,n){fetch("".concat(Gt,"/").concat(Wt,"/stats/tasks?").concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},Vt=function(e,t){return new Promise((function(n,a){fetch("".concat(Gt,"/").concat(Wt,"/tasks/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))},Rt=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt(n);case 3:(a=e.sent).error||(t.setTaskDocs(a.docs),t.setHasMoreTaskDocs(a.stats)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),qt=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.taskId,r=n.payload,e.prev=1,e.next=4,Vt(a,r);case 4:e.sent.error||t.updateTaskDocs({taskId:a,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Ut={taskDocs:[],filteredTaskDocs:[],taskDocsSkip:0,hasMoreTaskDocs:!1,getTaskDocs:Object(u.d)((function(e,t){return Rt(e,t)})),editTask:Object(u.d)((function(e,t){return qt(e,t)})),setTaskDocs:Object(u.b)((function(e,t){return function(e,t){e.taskDocsSkip+=50,e.taskDocs=[].concat(Object(Yt.a)(e.taskDocs),Object(Yt.a)(t))}(e,t)})),filterTaskDocs:Object(u.b)((function(e,t){return function(e,t){var n=new RegExp(t,"i");e.filteredTaskDocs=t.length>2?e.taskDocs.filter((function(e){return n.test(e.pl)||n.test(e.title)||n.test(e.description)||n.test(e.kanboard)})):[]}(e,t)})),resetTaskDocs:Object(u.b)((function(e,t){return function(e){e.taskDocsSkip=0,e.taskDocs=[]}(e)})),setHasMoreTaskDocs:Object(u.b)((function(e,t){return function(e,t){e.hasMoreTaskDocs=!!t.remaining}(e,t)})),updateTaskDocs:Object(u.b)((function(e,t){return function(e,t){var n=t.taskId,a=t.payload.reduce((function(e,t){var n=parseInt(t.propValue);return e[t.propName]=n||t.propValue,e}),{});a.done="true"===a.done,e.taskDocs=e.taskDocs.map((function(e){return e._id===n?Object(q.a)(Object(q.a)({},e),a):e}))}(e,t)}))},$t=n(31)["pmspa-api"],Kt=$t.api,Xt=$t.apiVersion,Qt=function(e){return new Promise((function(t,n){fetch("".concat(Kt,"/").concat(Xt,"/notes"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},Zt=function(e){var t=e.noteId,n=e.data;return new Promise((function(e,a){fetch("".concat(Kt,"/").concat(Xt,"/notes/").concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({data:n})}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return a(e)}))}))},en=function(e){return new Promise((function(t,n){fetch("".concat(Kt,"/").concat(Xt,"/notes/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},tn=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qt(n);case 3:(a=e.sent).error||t.updateTaskDocsWhenNoteCreated(a.note),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),nn=function(){var e=Object(d.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zt(n);case 3:(a=e.sent).error||t.updateTaskDocsWhenNoteEdited(a.note),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),an=function(){var e=Object(d.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,en(n);case 3:e.sent.error||t.updateTaskDocsWhenNoteDeleted(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),rn={postNote:Object(u.d)((function(e,t){return tn(e,t)})),editNote:Object(u.d)((function(e,t){return nn(e,t)})),deleteNote:Object(u.d)((function(e,t){return an(e,t)})),updateTaskDocsWhenNoteCreated:Object(u.b)((function(e,t){return function(e,t){e.taskDocs=e.taskDocs.map((function(e){return e._id===t.task&&e.notes.push(t),e}))}(e,t)})),updateTaskDocsWhenNoteEdited:Object(u.b)((function(e,t){return function(e,t){e.taskDocs=e.taskDocs.map((function(e){return e._id===t.task&&(e.notes=e.notes.map((function(e){return e._id===t._id?Object(q.a)(Object(q.a)({},e),t):e}))),e}))}(e,t)})),updateTaskDocsWhenNoteDeleted:Object(u.b)((function(e,t){return function(e,t){e.taskDocs=e.taskDocs.map((function(e){return e.notes=e.notes.filter((function(e){return e._id!==t})),e}))}(e,t)}))},cn=n(31)["pmspa-api"],on=cn.api,ln=cn.apiVersion,un=function(e){return new Promise((function(t,n){fetch("".concat(on,"/").concat(ln,"/stats/day?").concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},sn=function(e,t){return function(){var n=Object(d.a)(s.a.mark((function n(a,r){var c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(r);case 3:(c=n.sent).error||a[t](c.stats),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.warn(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()},dn=sn(un,"setDayStats"),mn=sn(un,"setDayStatsTotal"),fn=sn((function(e){return new Promise((function(t,n){fetch("".concat(on,"/").concat(ln,"/stats/task?").concat(e),{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}),"setTaskStats"),pn=function(e){return function(t,n){t.statsFetched=!0,t[e]=n}},hn=pn("dayStats"),En=pn("dayStatsTotal"),vn=pn("taskStats"),bn={statsFetched:!1,dayStats:[],dayStatsTotal:[],taskStats:[],getDayStats:Object(u.d)((function(e,t){return dn(e,t)})),getDayStatsTotal:Object(u.d)((function(e,t){return mn(e,t)})),getTaskStats:Object(u.d)((function(e,t){return fn(e,t)})),setDayStats:Object(u.b)((function(e,t){return hn(e,t)})),setDayStatsTotal:Object(u.b)((function(e,t){return En(e,t)})),setTaskStats:Object(u.b)((function(e,t){return vn(e,t)}))},kn=Object(u.c)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},Dt),Nt),Ht),Ut),rn),bn));o.a.render(r.a.createElement(l.a,null,r.a.createElement(u.a,{store:kn},r.a.createElement(bt,null))),document.getElementById("root"))},31:function(e){e.exports=JSON.parse('{"canonical":"https://markoangelovski.github.io/projectmanager-stage-v3","pmspa-api":{"api":"https://pm-api-staging-prod-projects-f0597n.mo5.mogenius.io","api_main":"https://project-manager-legacy-api.azurewebsites.net","api_legacy":"https://pmspa-api.herokuapp.com","api_booking_machine":"https://booking-machin-prod-projects-f0597n.mo5.mogenius.io","apiVersion":"v1","apiVersionBeta":"v1.1"},"CNAME":"","GlobalContainer":"GTM-MSH9PKJ","AGAdataLayer":{"GTM":{"SiteEnvironment":"stage","SiteLocalContainer":"GTM-NNWHRC6","GoogleAnalyticsLocal":"UA-179505223-1","Segment":"6z5fk23GsrGBhyijzsJR6tC5QwHLV4hH","AGAWidget":true}}}')},87:function(e,t,n){e.exports=n(112)},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.ff3ac663.chunk.js.map